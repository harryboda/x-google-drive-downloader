# Changelog

所有值得注意的更改都将记录在此文件中。

## [2.1.0] - 2025-01-14

### 🔧 关键修复
- **OAuth认证修复**: 解决令牌获取后一直转圈的问题（Dio拦截器递归死锁）
- **导航修复**: 修复认证成功后黑屏不进入主界面的问题
- **启动优化**: 改进应用启动时的认证状态检测
- **编译修复**: 解决枚举定义错误和类型问题

### 🚀 技术改进
- **拦截器优化**: 排除OAuth请求避免递归调用
- **导航逻辑**: 认证成功后自动进入主界面
- **调试增强**: 添加详细的调试日志
- **代码质量**: 优化架构，提升稳定性

### ⚠️ 重要说明
- **必要更新**: v2.0.0存在认证bug，请立即更新到v2.1.0
- **兼容性**: 完全兼容之前的配置和认证信息

## [2.0.0] - 2025-01-13 (已废弃，请使用v2.1.0)

### 🚀 新功能
- **零配置体验**: 内置OAuth凭据，无需环境变量设置
- **专业图标**: 全新设计的蓝色云下载图标
- **品牌升级**: 应用名称更新为 "X Google Drive Downloader"
- **智能路径**: 默认下载路径设置为用户Downloads目录
- **持久认证**: 一次登录，长期使用
- **多级存储**: 安全的认证信息存储策略
- **OAuth设置**: 高级用户可自定义OAuth配置
- **剪贴板监听**: 自动检测Google Drive链接
- **现代UI**: macOS原生设计风格

### 🔧 技术改进
- **类型安全**: 修复JSON序列化中的类型转换错误
- **错误处理**: 完善的异常处理和用户反馈
- **存储策略**: 实现SecureStorage -> 加密文件 -> 内存缓存的多级方案
- **代码质量**: 添加类型安全检查和代码规范
- **构建优化**: 简化构建和发布流程

### 🛡️ 安全增强
- **Keychain权限**: 配置macOS keychain访问权限
- **数据加密**: 多种方式保护用户认证信息
- **本地处理**: 所有敏感数据仅在本地处理
- **沙盒模式**: 符合macOS应用沙盒要求

### 📦 分发方式
- **DMG安装包**: 提供24MB的独立安装包
- **拖拽安装**: 简单的拖拽安装体验
- **开源发布**: 完整的GitHub开源项目

### 🔄 从v1.0升级
- 不再需要手动配置环境变量
- 不再需要shell脚本启动
- 认证信息会自动迁移保存
- 界面和功能完全重新设计

---

## [1.0.0] - 2024-12-XX

### 初始版本
- 基本的Google Drive文件夹下载功能
- 需要手动配置OAuth环境变量
- 使用shell脚本启动
- 基础的Flutter Desktop界面
- 命令行式的操作体验